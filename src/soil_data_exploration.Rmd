---
title: "Soil Data Exploration"
author: "German Silva"
date: "3/4/2022"
output: html_document
---

```{r setup, include=FALSE, message=FALSE, warning = FALSE}
knitr::opts_chunk$set(echo = TRUE, message=FALSE, warning = FALSE)

library(here)
library(tidyverse)
library(sf)
```

```{r}
soils <- read_csv(here("data", "shift_soil_data.csv")) %>% 
  mutate(date = lubridate::mdy(date)) %>% 
  drop_na()

soils_ex <- read_csv(here('data', 'soil_experiments.csv')) %>% 
  janitor::clean_names()

samples <- read_sf(here("data", "sampling_points.shp"))

sample_ids <- read_csv(here("data", "sample_ids.csv"))
```

```{r}
ggplot()+
  geom_sf(data = samples)+
  geom_point(data = sample_ids, aes(x = longitude, y = latitude), color = "red")
```


```{r}
ggplot(soils, aes(x = meter_location, y = electro_cond_mS_per_cm, color = transect)) +
  geom_point()+
  facet_wrap(~transect)+
  theme(legend.position = "none")+
  ggtitle("Soil Electro Conductivity All Sites")

ggplot(soils, aes(x = meter_location, y = electro_cond_mS_per_cm, color = transect)) +
  geom_point()+
  ggtitle("Soil Electro Conductivity All Sites")

soils %>% 
  group_by(transect, meter_location) %>% 
  summarize(mean = mean(electro_cond_mS_per_cm),
            dev = sd(electro_cond_mS_per_cm),
            variance = var(electro_cond_mS_per_cm)) %>% 
  kableExtra::kable() %>% 
  kableExtra::kable_classic(lightable_options = "striped")

```


```{r}
ggplot(soils_ex, aes(x = electro_cond_m_s_per_cm, y = ec_probe_measurement))+
  geom_point() +
  geom_smooth(method = "lm")
```

```{r}
ggplot(soils, aes(x = water_content_percent, y = electro_cond_mS_per_cm, color = transect)) +
  geom_point()+
  ggtitle("Soil Electro Conductivity All Sites")
```

